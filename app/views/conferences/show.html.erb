<table class="height100 width100 bordergray-background" style="border-spacing: 5px;">
	<tr>
		<td class="border-radius10 white-background">
			<%= render :partial => "chat_table" %>
		</td>
		<td class="width200px lavenderblue-background border-radius10" style="border-right: 2px inset black;">
			<%= render :partial => "conference_members" %>
		</td>
	</tr>
</table>

<% content_for :javascripts do %>
	var authenticityToken = <%= form_authenticity_token.inspect %>;
	conference = new Conference({
			id: <%= @conference.id %>,
			messageList: 'conference-messages-<%= @conference.id %>',
			messageSender: 'conference-message-sender-<%= @conference.id %>',
			messageDeliverUrl: '<%= conference_messages_path(@conference) %>',
			userId: <%= current_user.id %>
		});
		
	<% for user in @conference.users %>
		conference.users[conference.users.length] = new User({
				id: <%= user.id %>,
				name: '<%= user.login %>'
			});
	<% end %>
		
	<% for message in @messages %>
		conference.messageList.addMessage(new Message({ text:<%= message.text.inspect %>, sender:conference.getUserById(<%= message.sender_id %>) }));
	<% end %>
<% end %>